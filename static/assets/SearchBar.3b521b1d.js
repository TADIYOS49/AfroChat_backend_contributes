import{I as H,Q as x}from"./ImageModal.bac71592.js";import{l as O}from"./QDialog.05df106c.js";import{bY as L,r as s,d as W,cb as k,bU as Y,bS as j,bT as z,w as J,c as X,o as Z,aN as q,ab as A,f as r,bg as _,ac as w,a9 as ee,ag as ae,M as d,bD as oe,F as se,H as te,b$ as B}from"./index.9318a740.js";import{Q as le}from"./QInput.3b735948.js";import{g as ne}from"./explore.4cd00191.js";import{a as E,u as T,S as D,P as U}from"./chat-store.775f2457.js";import{u as re}from"./ReCaptchaVuePlugin.836d4bc4.js";import{_ as ue}from"./plugin-vue_export-helper.21dcd24c.js";const ce=L("search-store",()=>({searchInput:s("")})),M=L("questions-store",()=>{const C=s([]),u=s([]),m=s(!1),i=s(""),p=s("Gemini Pro");async function V(v,g){try{m.value=!0,i.value=v,setTimeout(()=>{const e=document.getElementById("placeholder");e==null||e.scrollIntoView({behavior:"smooth",block:"start"})},200);const a=await ne(v,p.value,g).then(e=>(u.value.length>0&&(u.value[u.value.length-1].recommendations=[]),e)).catch(e=>(console.log(e),e)).finally(()=>{m.value=!1});u.value.push({id:a.data.id,question:v,summary:a.data.summary,llm_model:a.data.llm_model,sources:a.data.sources,recommendations:a.data.recommendations}),setTimeout(()=>{const e=document.getElementById(a.data.id);e==null||e.scrollIntoView({behavior:"smooth",block:"start"})},100)}catch(a){console.log(a)}}return{ask_responses:u,fetchSearchData:V,questionsList:C,loading_response:m,last_question:i,ask_model:p}});const de={class:"column chats bg-secondary text-info"},me={class:"floating-search-bar bg-secondary"},ie={class:"left q-ml-md"},pe={key:1},ve=W({__name:"SearchBar",setup(C){const{executeRecaptcha:u,recaptchaLoaded:m}=re(),{populate_models:i}=E(),{model_type:p}=k(E()),{fetchSearchData:V}=M(),{ask_responses:v,loading_response:g}=k(M()),{is_dark_theme:a}=Y(),{Chat:e,ResetChat:y}=T(),{persona_id:R,sub_tool_id:N}=k(T()),I=j(),l=s(""),t=s("Ask"),f=s(!1),G=s(!1),b=s(!1),h=z();J(()=>t.value,async c=>{f.value=!1,c==="Generate image"?(p.value="image_models",await i("image_models")):(p.value="llm_models",await i("llm_models"))});const P=X(()=>l.value!==""||te(v.value).length>0||h.currentRoute.value.name==="response"),S=s(!1);function F(){y(),S.value=!S.value}const K=()=>{f.value=!f.value},{searchInput:$}=k(ce());async function Q(){try{const c=await u("sendData");if(console.log("token:",c),b.value=!0,l.value===""){I.notify({message:"Write your questions first!",timeout:700});return}if(t.value==="Generate image")y(),N.value=D.GenerateImage,R.value="",await e(l.value),await h.push({name:"chat",params:{id:D.GenerateImage},query:{name:"Generate Image",image:"https://res.cloudinary.com/afrochat/image/upload/v1699543455/imag.png"}});else if(t.value==="Chat"){y(),R.value=U.AfroChat,await e(l.value),await h.push({name:"chat",params:{id:U.AfroChat},query:{name:"AfroChat",image:"https://res.cloudinary.com/afrochat/image/upload/v1701867563/wwld5uwkhakuf4lufrxx.png"}});return}else t.value==="Ask"&&($.value=l.value,V(l.value,c).catch(o=>{console.log("Error:",o),I.notify({message:"Error sending data!",timeout:700,color:"negative"})}).finally(()=>{l.value=""}),await h.push({name:"response"}))}catch(c){console.error("Error sending data:",c),I.notify({message:"Error sending data!",timeout:700,color:"negative"})}finally{b.value=!1}}return Z(async()=>{G.value=await m()}),(c,o)=>(q(),A(se,null,[r(H,{image_modal:S.value},null,8,["image_modal"]),r(O,{class:"blur-effect",modelValue:f.value,"onUpdate:modelValue":o[3]||(o[3]=n=>f.value=n)},{default:_(()=>[w("div",de,[r(x,{"left-label":"",modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=n=>t.value=n),val:"Ask",label:"Ask",color:"blue",dark:d(a)},null,8,["modelValue","dark"]),r(x,{"left-label":"",modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=n=>t.value=n),val:"Chat",class:"text-left",label:"Chat",color:"blue",dark:d(a)},null,8,["modelValue","dark"]),r(x,{"left-label":"",modelValue:t.value,"onUpdate:modelValue":o[2]||(o[2]=n=>t.value=n),val:"Generate image",label:"Generate image",color:"blue",dark:d(a)},null,8,["modelValue","dark"])])]),_:1},8,["modelValue"]),w("div",me,[G.value?(q(),ee(le,{key:0,borderless:"",rounded:"",dark:d(a),modelValue:l.value,"onUpdate:modelValue":o[4]||(o[4]=n=>l.value=n),placeholder:t.value,class:"search-input bg-primary text-info",onKeydown:oe(Q,["enter"]),disable:b.value||d(g)==!0,loading:b.value||d(g)==!0},ae({_:2},[d(h).currentRoute.value.name!=="response"?{name:"prepend",fn:_(()=>[w("div",ie,[r(B,{onClick:K,dense:"",flat:"",name:"arrow_drop_down"})])]),key:"0"}:{name:"prepend",fn:_(()=>[w("div",{class:"left q-ml-md"})]),key:"1"},P.value?{name:"append",fn:_(()=>[r(B,{onClick:Q,class:"q-mr-md",name:"send"})]),key:"2"}:{name:"append",fn:_(()=>[r(B,{onClick:F,class:"q-mr-md",name:"photo_library"})]),key:"3"}]),1032,["dark","modelValue","placeholder","disable","loading"])):(q(),A("div",pe))])],64))}});var Ce=ue(ve,[["__scopeId","data-v-4ec0e94d"]]);export{Ce as S,M as u};
